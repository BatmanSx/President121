{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\konrad.ziebinski\\\\Desktop\\\\President\\\\zarzadzanie\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Users\\\\konrad.ziebinski\\\\Desktop\\\\President\\\\zarzadzanie\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:\\\\Users\\\\konrad.ziebinski\\\\Desktop\\\\President\\\\zarzadzanie\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import{useState,useEffect}from'react';import axios from'axios';function UserAPI(token){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isLogged=_useState2[0],setIsLogged=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isAdmin=_useState4[0],setIsAdmin=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),profile=_useState6[0],setProfile=_useState6[1];useEffect(function(){if(token){var getUser=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get('/user/infor',{headers:{Authorization:token}});case 3:res=_context.sent;setIsLogged(true);res.data.role===1?setIsAdmin(true):setIsAdmin(false);_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);alert(\"Admin mode\");case 11:case\"end\":return _context.stop();}}},_callee,null,[[0,8]]);}));return function getUser(){return _ref.apply(this,arguments);};}();getUser();}},[token]);return{isLogged:[isLogged,setIsLogged],isAdmin:[isAdmin,setIsAdmin],profile:[profile,setProfile]};}export default UserAPI;","map":{"version":3,"sources":["C:/Users/konrad.ziebinski/Desktop/President/zarzadzanie/src/api/UserAPI.js"],"names":["useState","useEffect","axios","UserAPI","token","isLogged","setIsLogged","isAdmin","setIsAdmin","profile","setProfile","getUser","get","headers","Authorization","res","data","role","alert"],"mappings":"qiBAAA,OAAQA,QAAR,CAAkBC,SAAlB,KAAkC,OAAlC,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CAEA,QAASC,CAAAA,OAAT,CAAiBC,KAAjB,CAAwB,eACYJ,QAAQ,CAAC,KAAD,CADpB,wCACbK,QADa,eACHC,WADG,8BAEUN,QAAQ,CAAC,KAAD,CAFlB,yCAEbO,OAFa,eAEJC,UAFI,8BAGUR,QAAQ,CAAC,EAAD,CAHlB,yCAGbS,OAHa,eAGJC,UAHI,eAKpBT,SAAS,CAAC,UAAK,CACX,GAAGG,KAAH,CAAS,CACL,GAAMO,CAAAA,OAAO,0FAAG,iLAEUT,CAAAA,KAAK,CAACU,GAAN,CAAU,aAAV,CAAyB,CACvCC,OAAO,CAAE,CAACC,aAAa,CAAEV,KAAhB,CAD8B,CAAzB,CAFV,QAEFW,GAFE,eAMRT,WAAW,CAAC,IAAD,CAAX,CACAS,GAAG,CAACC,IAAJ,CAASC,IAAT,GAAkB,CAAlB,CAAsBT,UAAU,CAAC,IAAD,CAAhC,CAAyCA,UAAU,CAAC,KAAD,CAAnD,CAPQ,+EAWRU,KAAK,CAAC,YAAD,CAAL,CAXQ,oEAAH,kBAAPP,CAAAA,OAAO,0CAAb,CAeAA,OAAO,GAEV,CACJ,CApBQ,CAoBP,CAACP,KAAD,CApBO,CAAT,CAsBA,MAAO,CACHC,QAAQ,CAAE,CAACA,QAAD,CAAWC,WAAX,CADP,CAEHC,OAAO,CAAE,CAACA,OAAD,CAAUC,UAAV,CAFN,CAGHC,OAAO,CAAE,CAACA,OAAD,CAAUC,UAAV,CAHN,CAAP,CAKH,CAED,cAAeP,CAAAA,OAAf","sourcesContent":["import {useState, useEffect} from 'react'\nimport axios from 'axios'\n\nfunction UserAPI(token) {\n    const [isLogged, setIsLogged] = useState(false)\n    const [isAdmin, setIsAdmin] = useState(false)\n    const [profile, setProfile] = useState([])\n\n    useEffect(() =>{\n        if(token){\n            const getUser = async () =>{\n                try {\n                    const res = await axios.get('/user/infor', {\n                        headers: {Authorization: token}\n                    })\n\n                    setIsLogged(true)\n                    res.data.role === 1 ? setIsAdmin(true) : setIsAdmin(false)\n\n\n                } catch (err) {\n                    alert(\"Admin mode\")\n                }\n            }\n\n            getUser()\n            \n        }\n    },[token])\n\n    return {\n        isLogged: [isLogged, setIsLogged],\n        isAdmin: [isAdmin, setIsAdmin],\n        profile: [profile, setProfile]\n    }\n}\n\nexport default UserAPI\n "]},"metadata":{},"sourceType":"module"}